// build time:Sat Jan 23 2021 00:07:09 GMT+0800 (中国标准时间)
var e=function(e,t,a){"use strict";var r="<i id='local-search-close'>×</i>";var l=document.getElementById(t);var i=document.getElementById(a);i.innerHTML=r+"<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>";$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();i.innerHTML="";l.addEventListener("input",function(){var e='<ul class="search-result-list">';var a=this.value.trim().toLowerCase().split(/[\s\-]+/);i.innerHTML="";if(this.value.trim().length<=0){return}t.forEach(function(t){var r=true;var l=[];if(!t.title||t.title.trim()===""){t.title="Untitled"}var i=t.title.trim();var n=i.toLowerCase();var s=t.content.trim().replace(/<[^>]+>/g,"");var c=s.toLowerCase();var u=t.url;var o=-1;var f=-1;var v=-1;if(c!==""){a.forEach(function(e,t){o=n.indexOf(e);f=c.indexOf(e);if(o<0&&f<0){r=false}else{if(f<0){f=0}if(t==0){v=f}}})}else{r=false}if(r){e+="<li><a href='"+u+"' class='search-result-title' target='_blank'>"+i+"</a>";var h=s;if(v>=0){var m=v-20;var p=v+80;if(m<0){m=0}if(m==0){p=100}if(p>h.length){p=h.length}var d=h.substr(m,p);a.forEach(function(e){var t=new RegExp(e,"gi");d=d.replace(t,'<em class="search-keyword">'+e+"</em>")});e+='<p class="search-result">'+d+"...</p>"}e+="</li>"}});e+="</ul>";if(e.indexOf("<li>")===-1){return i.innerHTML=r+"<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>"}i.innerHTML=r+e})}});$(document).on("click","#local-search-close",function(){$("#local-search-input").val("");$("#local-search-result").html("")})};var t=function(){var t="/search.xml";e(t,"local-search-input","local-search-result")};
//rebuild by hrmmi 